<?xml version='1.0' encoding='UTF-8' ?>
<!--Definiciones
ui: insert          Se utiliza en el archivo de plantilla, que define el contenido que se va a sustituir por
                    el archivo que cargue la plantilla. El contenido se puede reemplazar con "ui: define" tag.
ui: define          Define el contenido que se inserta en la plantilla con un juego "ui: insert" tag.
ui: include         Similar al de JSP "jsp: include", incluye el contenido de otra página XHTML.
ui: Composición     Si se utiliza con "plantilla" atributo, se carga la plantilla especificada, y los hijos de esta
                    etiqueta define el diseño de la plantilla; De lo contrario, es un grupo de elementos, que se 
                    puede insertar en alguna parte. Además, JSF elimina todo etiquetas "fuera" de la "ui: Composición" tag.
h: outputStylesheet etiqueta para incluir un archivo CSS en la cabeza para peinar todo el diseño de la página.

-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <link href="/resources/css/styleSW.css" rel="stylesheet" type="text/css"/>
        <link rel="shortcut icon" href="#{resource['img/favicon.ico']}" type="image/x-icon" />
        <title>
            <ui:insert name="title">
                Inicio
            </ui:insert>
        </title>
    </h:head>
    <script type="text/javascript">
        function noBack()
        {
            window.history.forward()
        }
        noBack();
        window.onload = noBack;
        window.onpageshow = function(evt) {
            if (evt.persisted)
                noBack()
        }
        window.onunload = function() {
            void (0)
        }
    </script>
    <h:body>
        <div id="page">
            <div id="header">
                <ui:insert name="header" >
                    <ui:include src="/tempart/commonHeader.xhtml" />

                </ui:insert>
            </div>

            <div id="content" style="min-height: 600px">
                <ui:insert name="content" >
                    <ui:include src="/tempart/commonContent.xhtml" />
                    <!--Dialogo modal para iniciar sesión fuera del view ************************************************************************************** -->                
                    <p:dialog header="Iniciar sesi&oacute;n" widgetVar="dlg2" modal="true">
                        <h:form>
                            <p:panel id="panelsesion">
                                <p:messages id="mensajessesion" autoUpdate="true"/>
                                <p:panelGrid columns="2">
                                    <p:outputLabel value="Usuario" for="username"/> 
                                    <p:inputText value="#{loginBean.username}" binding="#{loginBean.usernameText}" id="username" required="true" requiredMessage="Escriba un nombre de usuario"/>
                                    <p:outputLabel value="Contraseña" for="password"/>
                                    <p:password value="#{loginBean.password}" binding="#{loginBean.passwordText}" id="password" required="true" requiredMessage="Escriba una contraseña"/>
                                </p:panelGrid>
                                <center>
                                    <p:commandButton style="display:inline;" value="Iniciar" action="#{loginBean.iniciarSesion()}" update=":barraprincipal" onclick="noBack()"/>
                                    <p:commandButton style="display:inline;" type="reset" value="Limpiar" actionListener="#{loginBean.limpiarForm()}" immediate="true">
                                     
                                    </p:commandButton>
                                </center>
                            </p:panel>
                        </h:form>
                        <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />

                        <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                            <p:graphicImage name="/img/loading3.gif" />
                        </p:dialog>
                    </p:dialog> 

                </ui:insert>
            </div>

            <div id="footer" style="min-height: 100px; background-color: #3366FF !important;">
                <ui:insert name="footer" >
                    <ui:include src="/tempart/commonFooter.xhtml" />
                </ui:insert>
            </div>

        </div>
    </h:body>
</html>

